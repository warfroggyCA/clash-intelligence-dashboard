// Mock data for local testing when CoC API is not available
export const mockClanData = {
  tag: "#2PR8R8V8P",
  name: "...HeCk YeAh...",
  type: "inviteOnly",
  description: "Mock clan for testing",
  location: {
    id: 32000006,
    name: "United States",
    isCountry: true,
    countryCode: "US"
  },
  badgeUrls: {
    small: "https://api-assets.clashofclans.com/badges/70/2PR8R8V8P.png",
    large: "https://api-assets.clashofclans.com/badges/512/2PR8R8V8P.png",
    medium: "https://api-assets.clashofclans.com/badges/200/2PR8R8V8P.png"
  },
  clanLevel: 15,
  clanPoints: 25000,
  clanVersusPoints: 25000,
  requiredTrophies: 1000,
  warFrequency: "always",
  warWinStreak: 5,
  warWins: 150,
  warTies: 10,
  warLosses: 25,
  isWarLogPublic: true,
  warLeague: {
    id: 48000015,
    name: "Master League III"
  },
  members: 20,
  memberList: [
    {
      tag: "#VGQVRLRL",
      name: "DoubleD",
      role: "coLeader",
      expLevel: 200,
      league: {
        id: 48000015,
        name: "Master League III",
        iconUrls: {
          small: "https://api-assets.clashofclans.com/leagues/72/48000015.png",
          tiny: "https://api-assets.clashofclans.com/leagues/36/48000015.png",
          medium: "https://api-assets.clashofclans.com/leagues/288/48000015.png"
        }
      },
      trophies: 4188,
      versusTrophies: 0,
      clanRank: 1,
      previousClanRank: 1,
      donations: 124,
      donationsReceived: 0,
      townHallLevel: 14,
      builderHallLevel: 9,
      attackWins: 33,
      defenseWins: 0,
      versusBattleWins: 0,
      versusBattleWinCount: 0,
      warStars: 150,
      heroCount: 4,
      heroLevel: 65,
      heroEquipment: [
        { name: "Barbarian King", level: 65, maxLevel: 65, equipment: [] },
        { name: "Archer Queen", level: 75, maxLevel: 75, equipment: [] },
        { name: "Grand Warden", level: 53, maxLevel: 53, equipment: [] },
        { name: "Royal Champion", level: 29, maxLevel: 29, equipment: [] }
      ],
      spellsUnlocked: 12,
      troopsUnlocked: 20,
      clanCapitalContributions: 1367331,
      lastSeen: "2025-09-17T10:30:00.000Z"
    },
    {
      tag: "#UL0LRJ02",
      name: "War.Frog",
      role: "admin",
      expLevel: 180,
      league: {
        id: 48000012,
        name: "Crystal League I",
        iconUrls: {
          small: "https://api-assets.clashofclans.com/leagues/72/48000012.png",
          tiny: "https://api-assets.clashofclans.com/leagues/36/48000012.png",
          medium: "https://api-assets.clashofclans.com/leagues/288/48000012.png"
        }
      },
      trophies: 3564,
      versusTrophies: 0,
      clanRank: 2,
      previousClanRank: 2,
      donations: 0,
      donationsReceived: 0,
      townHallLevel: 13,
      builderHallLevel: 8,
      attackWins: 13,
      defenseWins: 0,
      versusBattleWins: 0,
      versusBattleWinCount: 0,
      warStars: 89,
      heroCount: 3,
      heroLevel: 72,
      heroEquipment: [
        { name: "Barbarian King", level: 72, maxLevel: 72, equipment: [] },
        { name: "Archer Queen", level: 75, maxLevel: 75, equipment: [] },
        { name: "Grand Warden", level: 50, maxLevel: 50, equipment: [] }
      ],
      spellsUnlocked: 11,
      troopsUnlocked: 18,
      clanCapitalContributions: 3114588,
      lastSeen: "2025-09-17T09:15:00.000Z"
    },
    {
      tag: "#G9QVRYC2Y",
      name: "warfroggy",
      role: "leader",
      expLevel: 195,
      league: {
        id: 48000012,
        name: "Crystal League I",
        iconUrls: {
          small: "https://api-assets.clashofclans.com/leagues/72/48000012.png",
          tiny: "https://api-assets.clashofclans.com/leagues/36/48000012.png",
          medium: "https://api-assets.clashofclans.com/leagues/288/48000012.png"
        }
      },
      trophies: 3513,
      versusTrophies: 0,
      clanRank: 3,
      previousClanRank: 3,
      donations: 293,
      donationsReceived: 0,
      townHallLevel: 13,
      builderHallLevel: 8,
      attackWins: 25,
      defenseWins: 0,
      versusBattleWins: 0,
      versusBattleWinCount: 0,
      warStars: 120,
      heroCount: 3,
      heroLevel: 69,
      heroEquipment: [
        { name: "Barbarian King", level: 69, maxLevel: 69, equipment: [] },
        { name: "Archer Queen", level: 72, maxLevel: 72, equipment: [] },
        { name: "Grand Warden", level: 50, maxLevel: 50, equipment: [] }
      ],
      spellsUnlocked: 11,
      troopsUnlocked: 18,
      clanCapitalContributions: 3082318,
      lastSeen: "2025-09-17T08:45:00.000Z"
    },
    {
      tag: "#YYVUCPQ90",
      name: "CosmicThomas",
      role: "admin",
      expLevel: 160,
      league: {
        id: 48000010,
        name: "Gold League I",
        iconUrls: {
          small: "https://api-assets.clashofclans.com/leagues/72/48000010.png",
          tiny: "https://api-assets.clashofclans.com/leagues/36/48000010.png",
          medium: "https://api-assets.clashofclans.com/leagues/288/48000010.png"
        }
      },
      trophies: 3485,
      versusTrophies: 0,
      clanRank: 4,
      previousClanRank: 4,
      donations: 112,
      donationsReceived: 72,
      townHallLevel: 12,
      builderHallLevel: 7,
      attackWins: 89,
      defenseWins: 0,
      versusBattleWins: 0,
      versusBattleWinCount: 0,
      warStars: 200,
      heroCount: 2,
      heroLevel: 57,
      heroEquipment: [
        { name: "Barbarian King", level: 57, maxLevel: 57, equipment: [] },
        { name: "Archer Queen", level: 64, maxLevel: 64, equipment: [] }
      ],
      spellsUnlocked: 10,
      troopsUnlocked: 16,
      clanCapitalContributions: 556754,
      lastSeen: "2025-09-17T07:30:00.000Z"
    },
    {
      tag: "#G09GGYC2Y",
      name: "Tigress",
      role: "coLeader",
      expLevel: 170,
      league: {
        id: 48000010,
        name: "Gold League I",
        iconUrls: {
          small: "https://api-assets.clashofclans.com/leagues/72/48000010.png",
          tiny: "https://api-assets.clashofclans.com/leagues/36/48000010.png",
          medium: "https://api-assets.clashofclans.com/leagues/288/48000010.png"
        }
      },
      trophies: 2887,
      versusTrophies: 0,
      clanRank: 5,
      previousClanRank: 5,
      donations: 114,
      donationsReceived: 0,
      townHallLevel: 13,
      builderHallLevel: 7,
      attackWins: 14,
      defenseWins: 0,
      versusBattleWins: 0,
      versusBattleWinCount: 0,
      warStars: 45,
      heroCount: 3,
      heroLevel: 65,
      heroEquipment: [
        { name: "Barbarian King", level: 65, maxLevel: 65, equipment: [] },
        { name: "Archer Queen", level: 69, maxLevel: 69, equipment: [] },
        { name: "Grand Warden", level: 41, maxLevel: 41, equipment: [] }
      ],
      spellsUnlocked: 11,
      troopsUnlocked: 18,
      clanCapitalContributions: 2472940,
      lastSeen: "2025-09-17T06:20:00.000Z"
    }
  ]
};

export const mockWarLog = [
  {
    result: "win",
    endTime: "2025-09-16T20:00:00.000Z",
    teamSize: 15,
    attacks: 28,
    stars: 42,
    destructionPercentage: 95.2,
    clan: {
      tag: "#2PR8R8V8P",
      name: "...HeCk YeAh...",
      clanLevel: 15,
      attacks: 14,
      stars: 21,
      destructionPercentage: 47.6,
      members: 15
    },
    opponent: {
      tag: "#ABC12345",
      name: "Test Clan",
      clanLevel: 14,
      attacks: 14,
      stars: 21,
      destructionPercentage: 47.6,
      members: 15
    }
  },
  {
    result: "win",
    endTime: "2025-09-14T20:00:00.000Z",
    teamSize: 15,
    attacks: 30,
    stars: 45,
    destructionPercentage: 98.1,
    clan: {
      tag: "#2PR8R8V8P",
      name: "...HeCk YeAh...",
      clanLevel: 15,
      attacks: 15,
      stars: 22,
      destructionPercentage: 48.3,
      members: 15
    },
    opponent: {
      tag: "#DEF67890",
      name: "Another Clan",
      clanLevel: 15,
      attacks: 15,
      stars: 23,
      destructionPercentage: 49.8,
      members: 15
    }
  }
];

export const mockCapitalSeasons = [
  {
    state: "ended",
    startTime: "2025-09-01T07:00:00.000Z",
    endTime: "2025-09-15T07:00:00.000Z",
    capitalTotalLoot: 150000,
    raidsCompleted: 25,
    totalAttacks: 50,
    enemyDistrictsDestroyed: 12,
    offensiveReward: 5000,
    defensiveReward: 2000,
    members: [
      {
        tag: "#VGQVRLRL",
        name: "DoubleD",
        attacks: 6,
        attackLimit: 6,
        bonusAttackLimit: 0,
        capitalResourcesLooted: 15000
      },
      {
        tag: "#UL0LRJ02",
        name: "War.Frog",
        attacks: 6,
        attackLimit: 6,
        bonusAttackLimit: 0,
        capitalResourcesLooted: 12000
      }
    ]
  }
];

export const mockFullClanSnapshot = {
  clanTag: "#2PR8R8V8P",
  clanName: "...HeCk YeAh...",
  fetchedAt: new Date().toISOString(),
  timestamp: new Date().toISOString(),
  date: new Date().toISOString().split('T')[0],
  clan: {
    name: "...HeCk YeAh...",
    tag: "#2PR8R8V8P",
    level: 15,
    points: 25000,
    warWins: 150,
    warLosses: 25
  },
  memberSummaries: mockClanData.memberList.map(member => ({
    tag: member.tag,
    name: member.name,
    role: member.role,
    townHallLevel: member.townHallLevel,
    trophies: member.trophies,
    donations: member.donations,
    donationsReceived: member.donationsReceived,
    attackWins: member.attackWins,
    versusBattleWins: member.versusBattleWins,
    versusTrophies: member.versusTrophies,
    clanCapitalContributions: member.clanCapitalContributions,
    lastSeen: member.lastSeen,
    heroLevel: member.heroLevel,
    heroCount: member.heroCount
  })),
  // Add playerDetails object that the function expects
  playerDetails: mockClanData.memberList.reduce((acc, member) => {
    acc[member.tag] = {
      name: member.name,
      tag: member.tag,
      townHallLevel: member.townHallLevel,
      trophies: member.trophies,
      donations: member.donations,
      donationsReceived: member.donationsReceived,
      attackWins: member.attackWins,
      versusBattleWins: member.versusBattleWins,
      versusTrophies: member.versusTrophies,
      clanCapitalContributions: member.clanCapitalContributions,
      lastSeen: member.lastSeen,
      heroLevel: member.heroLevel,
      heroCount: member.heroCount,
      heroEquipment: member.heroEquipment,
      spellsUnlocked: member.spellsUnlocked,
      troopsUnlocked: member.troopsUnlocked,
      // Add heroes array for extractHeroLevels function
      heroes: member.heroEquipment.map(hero => ({
        name: hero.name,
        level: hero.level,
        maxLevel: hero.maxLevel
      }))
    };
    return acc;
  }, {} as any),
  warLog: mockWarLog,
  capitalSeasons: mockCapitalSeasons,
  metadata: {
    warLogEntries: mockWarLog.length,
    capitalSeasons: mockCapitalSeasons.length,
    totalMembers: mockClanData.memberList.length,
    clanLevel: mockClanData.clanLevel,
    clanPoints: mockClanData.clanPoints,
    warWins: mockClanData.warWins,
    warLosses: mockClanData.warLosses
  }
};
